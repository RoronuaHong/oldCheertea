<!DOCTYPE html><html>  <head>    <title>胸牌打印</title>    <meta charset="UTF-8">    <meta name="keywords" content="keyword1,keyword2,keyword3">    <meta name="description" content="this is my page">    <meta name="content-type" content="text/html; charset=UTF-8">	<script src="http://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>	  <script type="text/javascript">        function doPrint() {        var bodyHtml = $("body").html();        var bdhtml=window.document.body.innerHTML;        var sprnstr="<!--startprint-->";        var eprnstr="<!--endprint-->";        var prnhtml=bdhtml.substr(bdhtml.indexOf(sprnstr)+17);        console.info(prnhtml);        prnhtml=prnhtml.substring(0,prnhtml.indexOf(eprnstr));        console.info(prnhtml);        window.document.body.innerHTML=prnhtml;        window.print();          var timer = setTimeout(function() {              window.document.body.innerHTML=bodyHtml;              $('#members').on("click", "li", function(){                  console.log(1)                  var memberId=$(this).data('memberid');                  var names= $(this).data('name');                  $.ajax({                      url:'http://wx.cheertea.com/widget?type=forQRCode&action=getMemberInfo',                      type:'get',                      dataType:'json',                      data:{'memberId':memberId},                      success:function(data){                          if(data.code==1){                              $('#memberName').find("p").eq(0).html("来&emsp;宾: " + names);                              $('#memberName').find("p").eq(1).html("会员ID: " + memberId);                              $("#memberqrcode").attr('src',data.data.qrPath);                          }                      }                  })              });          }, 100)        }      </script>    <style>      .doprint {        display: block;        width: 100px;        height: 50px;        margin:0 auto;        line-height:50px;        background: #f01b1b;        font-style: 28px;        text-align: center  ;        color: #fff;        -webkit-border-radius: 15px;        -moz-border-radius: 15px;        -ms-border-radius: 15px;        border-radius: 15px;        text-decoration: none;      }      #members {        width: 300px;      }      #members li {        list-style: none;        width: 100%;        height: 60px;        line-height: 60px;        font-size: 24px;      }      #members li:hover {        color: #f01b1b;        cursor: pointer;      }      #memberName {        font-size: 20px;      }    </style>  </head>  <body>    <table>    <tr>    <td>      <a target=_blank href="javascript:;" onClick="doPrint()" class="doprint">打印</a>      <ul id="members"></ul>    </td>    <td>      <!--startprint-->  <div style="width: 240px;position: relative;">    <!--<img src="http://images.cheertea.com/1.png" alt="" style="position: absolute; top: 20px;left: 20px;width: 25px;height: 25px;">-->    <img src="http://images.cheertea.com/2222.png" alt="" style="position: absolute; top: 0px;left: 123px;width: 40px;height: 40px;">    <img id='memberqrcode' style="width:95px;height:95px;float: left;" alt="" src="img/qrcodemember.png">  </div>  <div id='memberName' style="font-size:14px;font-weight:bold; text-align: center;letter-spacing: -.05em;margin: 0 0 0 2px; float:left;">    <p style="text-align: left;margin: 60px 0 -2px 0;">来&emsp;宾:一百天</p>    <p style="text-align: left;margin:0;">会员ID:123456</p>  </div><!--endprint-->    </td>    </tr>  </table><script type="text/javascript">  $.ajax({    url:'http://wx.cheertea.com/widget?type=forQRCode&action=getSignInMember',    type:'get',    dateType:'json',    success:function(data){      var  datas=$.parseJSON(data);          $.each(datas.data,function(i,n){              $('#members').append('<li data-name="'+n.name+'" data-memberid="'+n.member_id+'">'+n.member_id+'&nbsp;&nbsp;'+n.name);          });          $('#members').on("click", "li", function(){            console.log(1)            var memberId=$(this).data('memberid');             var names= $(this).data('name');            $.ajax({              url:'http://wx.cheertea.com/widget?type=forQRCode&action=getMemberInfo',              type:'get',              dataType:'json',              data:{'memberId':memberId},              success:function(data){				if(data.code==1){                    $('#memberName').find("p").eq(0).html("来&emsp;宾:" + names);                    $('#memberName').find("p").eq(1).html("会员ID:" + memberId);                    $("#memberqrcode").attr('src',data.data.qrPath);                }                }            })                             });        }  });</script>  </body></html>